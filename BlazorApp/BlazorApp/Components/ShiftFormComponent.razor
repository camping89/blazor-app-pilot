@using BlazorApp.Share.Models
@using BlazorApp.Data
@using BlazorApp.Components.Base
@inject EmployService EmployService
@inject ClientService ClientService

<SfDialog  Width="250px" IsModal="true" Visible="false" @ref="DialogObj">
    <DialogTemplates>
        <Header>@Title</Header>
        <Content>
            <EditForm id="shiftForm" Model="@shiftModel" OnValidSubmit="HandleValidSubmit">
                <DataAnnotationsValidator />
                <CustomFormValidator @ref="customFormValidator" ></CustomFormValidator>
                
                <div class="form-group">
                    <label for="title">Title:</label>
                    <SfTextBox ID="title" @bind-Value="@shiftModel.Title"></SfTextBox>
                    <ValidationMessage For="@(() => shiftModel.Title)"></ValidationMessage>
                </div>
                <div class="form-group">
                    <label for="employee">Employee:</label>
                    <SfDropDownList ID="employee" TValue="string" TItem="Employee" PopupHeight="200px" PopupWidth="200px" Placeholder="Select a employee" @bind-Value="@shiftModel.EmployeeId" DataSource="@_employees">
                        <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
                    </SfDropDownList>
                    <ValidationMessage For="@(() => shiftModel.EmployeeId)"></ValidationMessage>
                </div>
                <div class="form-group">
                     <label for="client">Client:</label>
                    <SfDropDownList ID="client" TValue="string" TItem="Client" PopupHeight="200px" PopupWidth="200px" Placeholder="Select a client" @bind-Value="@shiftModel.ClientId" DataSource="@_clients">
                        <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
                    </SfDropDownList>
                    <ValidationMessage For="@(() => shiftModel.ClientId)"></ValidationMessage>
                </div>

                <div class="form-group">
                    <label for="date">Date:</label>
                    <SfDatePicker ID="date" TValue="DateTime?" PlaceHolder="Select a date" Value="@shiftModel.Date"></SfDatePicker>
                </div>
                <div class="form-group">
                    <label for="startTime">Start Time:</label>
                    <SfTimePicker  ID="startTime" TValue="DateTime" PlaceHolder="Select a time" @bind-Value="@shiftModel.StartTime"></SfTimePicker>
                    <ValidationMessage For="@(() => shiftModel.StartTime)"></ValidationMessage>
                </div>
                
                <div class="form-group">
                     <label for="endTime">End Time:</label>
                    <SfTimePicker  ID="endTime" TValue="DateTime" PlaceHolder="Select a time" @bind-Value="@shiftModel.EndTime"></SfTimePicker>
                    <ValidationMessage For="@(() => shiftModel.EndTime)"></ValidationMessage>
                </div>
                <div class="form-group">
                     <label for="endTime">Status:</label>
                     <SfDropDownList TValue="string" TItem="StatusDto" PopupHeight="200px" PopupWidth="200px" Placeholder="Select a status" DataSource="@_status" @bind-Value="@shiftModel.StatusId">
                         <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
                     </SfDropDownList>
                </div>
                
            </EditForm>
        </Content>
    </DialogTemplates>
    <DialogButtons>
        <DialogButton Content="Submit" IsPrimary="true"  Type="ButtonType.Submit" form="shiftForm" />
        <DialogButton Content="Cancel" IsPrimary="false" OnClick="@OnCancel" />
    </DialogButtons>
</SfDialog>